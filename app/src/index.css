@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  /* Safe Area Insets for Android/iOS */
  --safe-area-inset-top: env(safe-area-inset-top, 0px);
  --safe-area-inset-bottom: env(safe-area-inset-bottom, 0px);
  --safe-area-inset-left: env(safe-area-inset-left, 0px);
  --safe-area-inset-right: env(safe-area-inset-right, 0px);

  /* Material 3 Design Tokens - Light Theme */
  --md-sys-color-primary: #006C4C;
  --md-sys-color-on-primary: #FFFFFF;
  --md-sys-color-primary-container: #89F8C7;
  --md-sys-color-on-primary-container: #002114;

  --md-sys-color-secondary: #4D6357;
  --md-sys-color-on-secondary: #FFFFFF;
  --md-sys-color-secondary-container: #D0E8D9;
  --md-sys-color-on-secondary-container: #0B1F16;

  --md-sys-color-tertiary: #3D5B72;
  --md-sys-color-on-tertiary: #FFFFFF;
  --md-sys-color-tertiary-container: #C1E8FF;
  --md-sys-color-on-tertiary-container: #001D32;

  --md-sys-color-surface: #FBFDF9;
  --md-sys-color-on-surface: #191C1A;
  --md-sys-color-surface-variant: #DBE5DE;
  --md-sys-color-on-surface-variant: #404943;

  --md-sys-color-background: #F8FAF6;
  --md-sys-color-on-background: #191C1A;

  --md-sys-color-outline: #707973;
  --md-sys-color-outline-variant: #BFC9C2;

  /* Surface Tones for Elevation/Depth (Light mode) */
  --surface-0: #FBFDF9;
  --surface-1: #F4F6F4;
  --surface-2: #EFF2EF;
  --surface-3: #E9EFEC;
  --surface-4: #E4E9E6;
  --surface-5: #DFE4E1;

  /* Semantic Colors */
  --color-success: #14A44D;
  --color-warning: #E4A11B;
  --color-error: #DC4C64;
  --color-info: #54B4D3;

  /* Elevation Shadows (Light Mode) */
  --elevation-0: none;
  --elevation-1: 0px 1px 2px rgba(0, 0, 0, 0.3), 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
  --elevation-2: 0px 1px 2px rgba(0, 0, 0, 0.3), 0px 2px 6px 2px rgba(0, 0, 0, 0.15);
  --elevation-3: 0px 4px 8px 3px rgba(0, 0, 0, 0.15), 0px 1px 3px rgba(0, 0, 0, 0.3);
  --elevation-4: 0px 6px 10px 4px rgba(0, 0, 0, 0.15), 0px 2px 3px rgba(0, 0, 0, 0.3);
  --elevation-5: 0px 8px 12px 6px rgba(0, 0, 0, 0.15), 0px 4px 4px rgba(0, 0, 0, 0.3);

  /* Motion Tokens */
  --duration-short: 100ms;
  --duration-medium: 250ms;
  --duration-long: 400ms;
  --duration-extra-long: 600ms;

  --easing-standard: cubic-bezier(0.2, 0.0, 0, 1.0);
  --easing-emphasized: cubic-bezier(0.3, 0.0, 0, 1.0);
  --easing-decelerate: cubic-bezier(0.0, 0.0, 0, 1.0);
  --easing-accelerate: cubic-bezier(0.3, 0.0, 1, 1.0);

  /* Legacy Variables for Compatibility */
  --bg-app: var(--md-sys-color-background);
  --text-main: var(--md-sys-color-on-surface);
  --text-muted: var(--md-sys-color-on-surface-variant);
  --bg-surface: var(--surface-1);
  --bg-surface-2: var(--surface-2);

  --primary-50: #eefcf6;
  --primary-100: #d5f6e6;
  --primary-500: var(--md-sys-color-primary);
  --primary-600: #005c49;
  --primary-900: #003825;
}

.dark {
  /* Material 3 Design Tokens - Dark Theme */
  --md-sys-color-primary: #6DDBAC;
  --md-sys-color-on-primary: #003825;
  --md-sys-color-primary-container: #005138;
  --md-sys-color-on-primary-container: #89F8C7;

  --md-sys-color-secondary: #B4CCBD;
  --md-sys-color-on-secondary: #1F352A;
  --md-sys-color-secondary-container: #354B40;
  --md-sys-color-on-secondary-container: #D0E8D9;

  --md-sys-color-tertiary: #A8C8FF;
  --md-sys-color-on-tertiary: #003258;
  --md-sys-color-tertiary-container: #00487C;
  --md-sys-color-on-tertiary-container: #D4E3FF;

  --md-sys-color-surface: #191C1A;
  --md-sys-color-on-surface: #E1E3DF;
  --md-sys-color-surface-variant: #404943;
  --md-sys-color-on-surface-variant: #BFC9C2;

  --md-sys-color-background: #121412;
  --md-sys-color-on-background: #E1E3DF;

  --md-sys-color-outline: #8A938C;
  --md-sys-color-outline-variant: #404943;

  /* Surface Tones for Elevation/Depth (Lighter in Dark Mode) */
  --surface-0: #191C1A;
  --surface-1: #202522;
  --surface-2: #252A27;
  --surface-3: #2A302C;
  --surface-4: #2F3531;
  --surface-5: #343A36;

  /* Semantic Colors (Adjusted for Dark Mode) */
  --color-success: #00C851;
  --color-warning: #FFBB33;
  --color-error: #FF4444;
  --color-info: #33B5E5;

  /* Elevation Shadows (Subtler in Dark Mode) */
  --elevation-0: none;
  --elevation-1: 0px 1px 3px 1px rgba(0, 0, 0, 0.6), 0px 1px 2px rgba(0, 0, 0, 0.3);
  --elevation-2: 0px 2px 6px 2px rgba(0, 0, 0, 0.6), 0px 1px 2px rgba(0, 0, 0, 0.3);
  --elevation-3: 0px 4px 8px 3px rgba(0, 0, 0, 0.6), 0px 1px 3px rgba(0, 0, 0, 0.3);
  --elevation-4: 0px 6px 10px 4px rgba(0, 0, 0, 0.6), 0px 2px 3px rgba(0, 0, 0, 0.3);
  --elevation-5: 0px 8px 12px 6px rgba(0, 0, 0, 0.6), 0px 4px 4px rgba(0, 0, 0, 0.3);

  /* Legacy Variables for Compatibility */
  --bg-app: var(--md-sys-color-background);
  --text-main: var(--md-sys-color-on-surface);
  --text-muted: var(--md-sys-color-on-surface-variant);
  --bg-surface: var(--surface-1);
  --bg-surface-2: var(--surface-2);
}

/* Material 3 Typography */
.m3-display-large {
  @apply text-[57px] leading-[64px] tracking-[-0.25px] font-normal;
}

.m3-display-medium {
  @apply text-[45px] leading-[52px] tracking-[0px] font-normal;
}

.m3-display-small {
  @apply text-[36px] leading-[44px] tracking-[0px] font-normal;
}

.m3-headline-large {
  @apply text-[32px] leading-[40px] tracking-[0px] font-normal;
}

.m3-headline-medium {
  @apply text-[28px] leading-[36px] tracking-[0px] font-normal;
}

.m3-headline-small {
  @apply text-[24px] leading-[32px] tracking-[0px] font-normal;
}

.m3-title-large {
  @apply text-[22px] leading-[28px] tracking-[0px] font-normal;
}

.m3-title-medium {
  @apply text-[16px] leading-[24px] tracking-[0.15px] font-medium;
}

.m3-title-small {
  @apply text-[14px] leading-[20px] tracking-[0.1px] font-medium;
}

.m3-label-large {
  @apply text-[14px] leading-[20px] tracking-[0.1px] font-medium;
}

.m3-label-medium {
  @apply text-[12px] leading-[16px] tracking-[0.5px] font-medium;
}

.m3-label-small {
  @apply text-[11px] leading-[16px] tracking-[0.5px] font-medium;
}

.m3-body-large {
  @apply text-[16px] leading-[24px] tracking-[0.5px] font-normal;
}

.m3-body-medium {
  @apply text-[14px] leading-[20px] tracking-[0.25px] font-normal;
}

.m3-body-small {
  @apply text-[12px] leading-[16px] tracking-[0.4px] font-normal;
}

/* Material 3 Elevation Utilities */
.elevation-0 {
  box-shadow: var(--elevation-0);
}

.elevation-1 {
  box-shadow: var(--elevation-1);
}

.elevation-2 {
  box-shadow: var(--elevation-2);
}

.scrollbar-thin::-webkit-scrollbar-thumb {
  @apply bg-[var(--md-sys-color-outline-variant)] rounded-full;
}

.scrollbar-thin::-webkit-scrollbar-thumb:hover {
  @apply bg-[var(--md-sys-color-outline)];
}

/* Legacy Class Support */
.bg-app {
  @apply bg-[var(--bg-app)];
}

.text-main {
  @apply text-[var(--text-main)];
}

.text-muted {
  @apply text-[var(--text-muted)];
}

.bg-surface {
  @apply bg-[var(--bg-surface)];
}

.bg-surface-2 {
  @apply bg-[var(--bg-surface-2)];
}

/* Optimized theme transitions - only apply to specific elements */
/* Universal * transitions removed to eliminate flicker */
@supports (view-transition-name: none) {

  /* For browsers that support View Transitions API */
  ::view-transition-old(root),
  ::view-transition-new(root) {
    animation-duration: 0.2s;
  }
}

/* Fallback: Add transitions only to interactive elements */
button,
a,
input,
select,
textarea,
[class*="bg-"],
[class*="text-"],
[class*="border-"] {
  transition-property: background-color, border-color, color, fill, stroke, box-shadow;
  transition-duration: var(--duration-medium);
  transition-timing-function: var(--easing-standard);
}

/* Animations */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fade-in {
  animation: fadeIn 0.4s var(--easing-standard) forwards;
}

@keyframes shimmer {
  0% {
    background-position: -500px 0;
  }

  100% {
    background-position: 500px 0;
  }
}

.shimmer {
  background: linear-gradient(90deg,
      var(--md-sys-color-surface-variant) 0%,
      var(--md-sys-color-outline-variant) 25%,
      var(--md-sys-color-surface-variant) 50%,
      var(--md-sys-color-surface-variant) 100%);
  background-size: 1000px 100%;
  animation: shimmer 1.5s linear infinite;
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-slide-up {
  animation: slideUp 0.4s var(--easing-emphasized) forwards;
}

@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.9);
  }

  to {
    opacity: 1;
    transform: scale(1);
  }
}

.animate-scale-in {
  animation: scaleIn 0.3s var(--easing-emphasized) forwards;
}

/* Ripple effect (Material Design) */
.ripple {
  position: relative;
  overflow: hidden;
}

.ripple::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.5);
  transform: translate(-50%, -50%);
  transition: width 0.6s, height 0.6s;
}

.ripple:active::after {
  width: 300px;
  height: 300px;
}